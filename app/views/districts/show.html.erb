<%= render 'shared/navbar' %>
<div class="d-flex justify-content-center">
	<h2>Explore the neighbourhood <strong><%= @district.name %></strong></h2>
</div>

<div class="d-flex justify-content-between btn-container">
	<div class="d-flex flex-column justify-content-between mr-4">
		<button type="button" data-value="restaurants" id="restaurant-btn" class="btn-show-category"><i class="fas fa-utensils"></i></button>
		<button type="button" data-value="bars" class="btn-show-category"><i class="fas fa-beer"></i></button>
		<button type="button" data-value="schools" id="school-btn" class="btn-show-category"><i class="fas fa-graduation-cap"></i></button>
		<button type="button" data-value="subways" id="subway-btn" class="btn-show-category"><i class="fas fa-subway"></i></button>
		<button type="button" data-value="bixis" id="bixi-btn" class="btn-show-category"><i class="fas fa-bicycle"></i></button>
		<button type="button" data-value="gyms" id="gym-btn" class="btn-show-category"><i class="fas fa-dumbbell"></i></button>
		<button type="button" data-value="coffees" id="coffee-btn" class="btn-show-category"><i class="fas fa-coffee"></i></button>
	</div>

	<div class="w-100 position-relative">
		<div
			class="map mr-4"
			id="show-map"
			data-markers="<%= @markers.to_json %>"
			data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"
			data-center="<%= @district.location.to_json %>"
			data-coordinates="<%= @district.coordinates.to_json %>"
			data-restaurants="<%= @restaurant_coordinates.to_json %>"
			data-schools="<%= @school_coordinates.to_json %>"
			data-bars="<%= @bar_coordinates.to_json %>"
			data-subways="<%= @subway_coordinates.to_json %>"
	    data-coffees="<%= @cafe_coordinates.to_json %>"
	    data-gyms="<%= @gym_coordinates.to_json %>"
	    data-bixis="<%= @bixi_coordinates.to_json %>"
		>
		</div>
		<div id="map-card">
			<button class="map-btn btn btn-primary mb-4" type="button" data-toggle="collapse" data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
			  <p>Summary of <strong><%= @district.name %></strong></p>
			</button>
			<div class="collapse" id="collapseExample">
			  <div class="card card-body" id="map-card-down">
			  	<%= @district.set_score("park_score") %>
			  </div>
			</div>
		</div>
	</div>
</div>

<p>Other districts you may like...</p>

<% unless cookies[:top_districts].nil? %>
	<% districts = JSON.parse(cookies[:top_districts]).map { |id| District.find(id) } %>
	<% districts.each do |district| %>
		<div class="card-map">
			<img class="image-map" src="https://api.mapbox.com/styles/v1/mapbox/streets-v11/static/-73.572832,45.485027,13,-56,0/600x600?access_token=pk.eyJ1IjoiYmVuamFtaW5kb21pbmd1ZSIsImEiOiJjandmcTJrcHMweTIzNDNrZHdxMHppajh2In0._lnGrzv4VjfVS4ehUHj3Vw" alt="">
			<div class="card-map-infos">
				<p>Montr√©al</p>
				<h2><%= district.name %></h2> 
			</div>
		</div>
	<% end %>
<% end %>


